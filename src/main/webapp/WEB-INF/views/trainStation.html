<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeleaf.org" xmlns="http://www.w3.org/1999/html">

<head>
    <meta charset="UTF-8">
    <title>Train Station</title>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link th:href="@{/css/style.css}" rel="stylesheet" type="text/css">
</head>

<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container-xxl">
                <img src="../pictures/train1.png" width="100" height="60" />
                <!-- <a class="navbar-brand" href="#">Railway</a> -->
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="#">Home</a>
                        </li>
                    </ul>
                    <ul class="nav justify-content-end">
                        <li class="nav-item">
                            <a class="nav-link" href="#">Sign in</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Sign up</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- <form th:method="GET" action="define/sign_in">
            <input value="Sign in" type="submit"/>
        </form>
        <form th:method="GET" action="define/sign_up">
            <input value="Sign up" type="submit"/>
        </form> -->


    <div class="container-xxl">
        <th:block th:if="${search}">
            <form th:method="GET" th:action="@{/search/found}">
                <h3>Let's find the right train</h3>

                <!-- <label for="arrival_place">Enter arrival place: </label>
                <input id="arrival_place" name="arrivalPlace" type="text" /><br>

                <label for="departure_date">Enter departure date: </label>
                <input id="departure_date" name="departureDate" type="date" /><br>

                <label for="departure_time">Enter departure time: </label>
                <input id="departure_time" name="departureTime" type="time" /><br>

                <input value="Find" type="submit" /> -->

                <div class="container">
                    <div class="row align-items-start">
                        <div class="row">
                            <div class="col">
                                <label for="arrival_place" class="form-label">Arrival place</label>
                                <input id="arrival_place" name="arrivalPlace" class="form-control"
                                    list="datalistOptions" placeholder="Arrival palce">

                                <datalist id="datalistOptions">
                                    <div th:each="arrival: ${arrivalResponse.getTrainsArrivalPlaces()}">
                                        <option th:value="${arrival}"></option>
                                    </div>
                                </datalist>
                            </div>
                            <div class="col">
                                <label for="departure_date" class="form-label">Departure date</label>
                                <input id="departure_date" name="departureDate" class="form-control me-2" type="date"
                                    placeholder="Departure date" aria-label="Search">
                            </div>
                            <div class="col">
                                <label for="departure_time" class="form-label">Departure time</label>
                                <input id="departure_time" name="departureTime" class="form-control me-2" type="time"
                                    placeholder="Departure time" aria-label="Search">
                            </div>
                            <div class="col">
                                <button class="btn btn-outline-primary" type="submit">Search</button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </th:block>

        <th:block th:if="${found}">
            <h3>Here's what was found</h3>
            <!-- <table border="1">
                <div th:each="train: ${response.getTrainDTOList()}">
                    <tr>
                        <td>
                            <p th:text="${train.toString()}"></p>
                        </td>
                        <td>
                            <div th:each="pricing: ${train.getPricingDTOList()}">
                                <form th:method="GET" th:action="@{/registration/pricing/__${pricing.getId()}__/print}">
                                    <p th:text="${pricing.toString()}"></p>
                                    <input value="Choose" type="submit" />
                                </form>
                            </div>
                        </td>
                    </tr>
                </div>
            </table> -->

            <div th:each="train: ${response.getTrainDTOList()}">
                <table class="table table-striped">
                    <tr>
                        <th>Number</th>
                        <th>Arrival place</th>
                        <th>Departure date</th>
                        <th>Departure time</th>
                        <th>Kilometers</th>
                        <th>Comfort type</th>
                        <th>Free seats</th>
                        <th>Price</th>
                        <th>Reserve button</th>
                    </tr>
                    <tr>
                        <td>
                            <p th:text="${train.getNumber()}"></p>
                        </td>
                        <td>
                            <p th:text="${train.getArrivalPlace()}"></p>
                        </td>
                        <td>
                            <p th:text="${train.getDepartureDate()}"></p>
                        </td>
                        <td>
                            <p th:text="${train.getDepartureTime()}"></p>
                        </td>
                        <td>
                            <p th:text="${train.getKilometers()}"></p>
                        </td>
                        <!-- <table class="table table-striped"> -->
                        <div th:each="pricing: ${train.getPricingDTOList()}">
                            <form th:method="GET" th:action="@{/registration/pricing/__${pricing.getId()}__/print}">
                                <!-- <tr> -->
                                <td>
                                    <p th:text="${pricing.getComfortDTO().getType()}"></p>
                                </td>
                                <td>
                                    <p th:text="${pricing.getSeatsNumber()}"></p>
                                </td>
                                <td>
                                    <p th:text="${pricing.getPrice()}"></p>
                                </td>
                                <td>
                                    <button class="btn btn-outline-primary" type="submit">Reserve</button>
                                </td>
                                <!-- </tr> -->
                            </form>
                        </div>
                        <!-- </table> -->
                    </tr>
                </table>
            </div>
        </th:block>

        <th:block th:if="${registration}">
            <form th:method="POST" action="/payment/create">

                <input hidden name="trainId" th:value="${response.getSelectTrainDTO().getId()}" />
                <input hidden name="pricingId" th:value="${response.getPricingDTO().getId()}" />

                <h3>Registration of check</h3>

                <div class="container">
                    <div class="row align-items-start">

                        <div class="row">

                            <div class="col">
                                <div class="mb-2">
                                    <label for="name" class="form-label">Name</label>
                                    <input class="form-control" id="name" name="name">
                                </div>
                                <div class="mb-2">
                                    <label for="surname" class="form-label">Surname</label>
                                    <input class="form-control" id="surname" name="surname">
                                </div>
                                <div class="mb-2">
                                    <label for="sex" class="form-label">Sex</label>
                                    <input class="form-control" id="sex" name="sex">

                <!-- <div class="col">
                                        <input class="form-control" list="datalistOptions" id="exampleDataList">
                                        <datalist id="datalistOptions">
                                            <option value="Male">
                                            <option value="Female">
                                        </datalist>
                                    </div> -->

                </div>
                                <div class="mb-2">
                                    <label for="birth_date" class="form-label">Birth date</label>
                                    <input class="form-control" id="birth_date" name="birthDate">
                                </div>
                                <div class="mb-2">
                                    <label for="document_type" class="form-label">Document type</label>
                                    <input class="form-control" id="document_type" name="documentType">
                                </div>
                                <div class="mb-2">
                                    <label for="document_series" class="form-label">Document series</label>
                                    <input class="form-control" id="document_series" name="documentSeries">
                                </div>
                                <div class="mb-2">
                                    <button class="btn btn-outline-primary" type="submit">Registrate</button>
                                </div>
                            </div>

                            <div class="col">
                                <div class="card text-dark bg-light mb-3" style="max-width: 30rem;">
                                    <h5 class="card-header"
                                        th:text="${'Train number: '+ response.getSelectTrainDTO().getNumber}"></h5>
                                    <div class="card-body">
                                        <h6 class="card-title">Arrival point</h6>
                                        <p class="card-text"
                                            th:text="${response.getSelectTrainDTO().getArrivalPlace()}"></p>
                                    </div>

                <!-- <div class="card-body">
                                        <h5 class="card-title">Departure date</h5>
                                        <p class="card-text" th:text="${response.getSelectTrainDTO().getDepartureDate()"></p>
                                    </div> -->

                <div class="card-body">
                                        <h6 class="card-title">Departure time</h6>
                                        <p class="card-text"
                                            th:text="${response.getSelectTrainDTO().getDepartureTime()}"></p>
                                    </div>
                                    <div class="card-body">
                                        <h6 class="card-title">Kilometers</h6>
                                        <p class="card-text" th:text="${response.getSelectTrainDTO().getKilometers()}">
                                        </p>
                                    </div>
                                    <div class="card-body">
                                        <h6 class="card-title">Comfort type</h6>
                                        <p class="card-text"
                                            th:text="${response.getPricingDTO().getComfortDTO().getType()}"></p>
                                    </div>
                                    <div class="card-body">
                                        <h6 class="card-title">Price</h6>
                                        <p class="card-text" th:text="${response.getPricingDTO().getPrice()}"></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- <p th:text="${response.getSelectTrainDTO().toString()}"></p>
                <p th:text="${response.getPricingDTO().toString()}"></p>

                <label for="name">Enter name: </label>
                <input id="name" name="name" type="text" /><br>

                <label for="surname">Enter surname: </label>
                <input id="surname" name="surname" type="text" /><br>

                <label for="sex">Enter sex: </label>
                <input id="sex" name="sex" type="text" /><br>

                <label for="birth_date">Enter birth date: </label>
                <input id="birth_date" name="birthDate" type="data" /><br>

                <label for="document_type">Enter document type: </label>
                <input id="document_type" name="documentType" type="text" /><br>

                <label for="document_series">Enter document series: </label>
                <input id="document_series" name="documentSeries" type="text" /><br>

                <input type="submit" value="Create" /> -->
            </form>
        </th:block>

        <th:block th:if="${payment}">
            <form th:method="GET" action="/search">
                <h3>Registration was successful</h3>
                <h4>Passenger: </h4>
                <p th:text="${response.getPassengerDTO().toString()}"></p>
                <h4>Registered on train: </h4>
                <p th:text="${response.getTrainDTO().toString()}"></p>
                <h4>Pricing: </h4>
                <p th:text="${response.getPricingDTO().toString()}"></p>
                <h4>Amount: </h4>
                <p th:text="${response.getPaymentDTO().getAmount()}"></p>

                <input type="submit" value="Ok" />
            </form>
            <form th:method="GET" th:action="@{passenger/__${response.getPassengerDTO().getId()}__/receipts}">
                <input value="See all receipts" type="submit" />
            </form>
        </th:block>

        <th:block th:if="${receipts}">
            <form th:method="GET" action="/search">
                <h3>Personal data: </h3>

                <h4>Passenger: </h4>
                <p th:text="${response.getPassengerDTO().toString()}"></p>

                <h4>Receipts: </h4>
                <div th:each="pricing: ${response.getPassengerDTO().getPaymentDTOList()}">
                    <p th:text="${pricing.toString()}"></p>
                </div>

                <input type="submit" value="Return to search trains" />
            </form>
        </th:block>

        <!-- <th:block th:if="${sign_in}">
            <form th:method="POST" action="/create">
                <h3>Enter personal data:</h3>

                <label for="name">Enter name: </label>
                <input id="name" name="name" type="text" /><br>

                <label for="surname">Enter surname: </label>
                <input id="surname" name="surname" type="text" /><br>

                <label for="sex">Enter sex: </label>
                <input id="sex" name="sex" type="text" /><br>

                <label for="birth_date">Enter birth date: </label>
                <input id="birth_date" name="birthDate" type="text" /><br>

                <label for="document_type">Enter document type: </label>
                <input id="document_type" name="documentType" type="text" /><br>

                <label for="document_series">Enter document series: </label>
                <input id="document_series" name="documentSeries" type="text" /><br>

                <h3>Create login and password:</h3>

                <label for="name">Login: </label>
                <input id="name" name="name" type="text" /><br>

                <label for="surname">Password: </label>
                <input id="surname" name="surname" type="text" /><br>

                <input type="submit" value="Create" />
            </form>
        </th:block> -->

        <!-- <th:block th:if="${sign_up}">
            <form th:method="GET" action="/search">
                <h3>Enter login and password:</h3>

                <label for="login">Login: </label>
                <input id="login" name="login" type="text" /><br>

                <label for="password">Password: </label>
                <input id="password" name="password" type="text" /><br>

                <input type="submit" value="Create" />
            </form>
        </th:block> -->
    </div>

    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
</body>

</html>